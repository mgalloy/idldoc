
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Template needs structure with the following fields:
       version : IDLdoc version
       date : string containing date of file creation
       embed : 0 for link to CSS, 1 for embed CSS
       css_location : if embed then string filename of CSS file location, o/w href to CSS file
       idldoc_syntax_filename : file containing IDLdoc output for the idldoc routine
       navbar_filename : filename of navbar template
       footer : filename of footer file to include
       tagline_filename : filename of tagline template
     Plus stuff needed by the templates: navbar, tagline
-->

<!-- Generated by IDLdoc [% version %] on [% date %] -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>IDLdoc Developer's Help ([% title %])</title>

    [% IF embed %]
    <style type="text/css" media="all">
         [% INCLUDE css_location %]
    </style>	
    <style type="text/css" media="print">
         [% INCLUDE print_css_location %]
    </style>
    [% ELSE %]
    <link rel="stylesheet" type="text/css" href="[% root %]/main_files.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="[% root %]/main_files_print.css" media="print"/>
    [% END %]

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="IDLdoc Developer's Help ([% title %])";
      }
    </script>
  </head>


  <body onload="setTitle();">
    
    [% INCLUDE_TEMPLATE navbar_filename %]
    
    <div id="container">

      <h1>IDLdoc developer's guide</h1>

      <p>This guide discusses how to mark up IDL pro code in order to
      insert more information into IDLdoc's output.</p>

      <p>Comments on the routine and file level are placed between
      ";+" and ";-" lines before a routine in IDL source code. Content
      between these lines is copied verbatim into the IDLdoc output
      for the routine it appears before with the exception of the
      @-preceded "tags" listed in tables below. Once an @ appears in
      the comments, IDLdoc processes all remaining lines of the
      comments as tags. To place a non-tag defining "@" in your
      comments, escape it with a "\", as in
      "email_address\@rsinc.com".</p>

      <p>In the following example, the @author tag is used to indicate
      an author of the code. The second "@" is escaped to allow its
      literal use in the email address:</p>

	<pre class="snippet">; @author Michael Galloy, mgalloy\@rsinc.com</pre>

      <h2>Routine level comments</h2>

      <p>There are many tags which describe an individual
      routine. Each tag name appears after an "@" sign as the first
      non-whitespace character after the ;. The tags are described
      below.</p>

      <table class="basic" cellspacing="0">
	<tr>
	  <th>Tag</th>
	  <th>Description</th>
	</tr>
	<tr>
	  <td>abstract</td>
	  <td>
	    Presence of the this tag indicates this method is
	    abstract. This is intended for use with methods of a class
	    which are not intended to be called, but are only provided
	    as documenting an interface that a subclass will override.
	  </td>
	</tr>
	<tr>
	  <td>author</td>
	  <td>
	    Text following this tag appears in a list of attributes
	    of the routine marked as "Author."
	  </td>
	</tr>
	<tr>
	  <td>bugs</td>
	  <td>
	    Text that follows this tag is copied into a bug
	    attribute of the routine and placed in a library wide
	    listing which documents known failings of routines.
	  </td>
	</tr>
	<tr>
	  <td>categories</td>
	  <td>
	    Text following this tag is used as a comma separated list
	    of categories of the routine. The syntax is:

	    <pre class="snippet">; @categories math, input/output</pre>

	    Category names are case-sensitive and may contain any
	    characters except commas (though whitespace at the
	    beginning and end will be removed).
	  </td>
	</tr>
	<tr>
	  <td>copyright</td>
	  <td>
	    Text following this tag appears in a list of attributes
	    of the routine marked as "Copyright."
	  </td>
	</tr>
	<tr>
	  <td>customer_id</td>
	  <td>
	    Text following this tag appears in a list of attributes
	    of the routine marked as "Customer ID."
	  </td>
	</tr>
	<tr>
	  <td>examples</td>
	  <td>
	    Text following this tag is copied into an examples
	    attribute of the routine; it is intended to have
	    example code of using the routine.
	  </td>
	</tr>
	<tr>
	  <td>field</td>
	  <td>
	    For routines in files that end in "__define", this
	    provides documentation of a member variable of a
	    class/structure. The syntax is 
	    
	    <pre class="snippet">; @field field_name comment</pre>
	    
	    where "field" matches one of the structure field names
	    of the structure type/class being defined.
	  </td>
	</tr>
	<tr>
	  <td>hidden</td>
	  <td>
	    Presence of this tag hides this routine in IDLdoc
	    output.
	  </td>
	</tr>
	<tr>
	  <td>history</td>
	  <td>
	    Text following this tag is copied into a history
	    attribute of the routine; it is intended to have a
	    history of the creators and modifiers of the source
	    code of the routine.
	  </td>
	</tr>
	<tr>
	  <td>inherits</td>
	  <td>
	    Obsolete. Intended to provide the parent class of the
	    documented class, but this is automatically handled by
	    IDLdoc now (as long as class definitions are in files
	    that end "__define").
	  </td>
	</tr>
	<tr>
	  <td>keyword</td>
	  <td>
	    This tag documents a single keyword parameter to the
	    routine. This syntax is 
	    
	    <pre class="snippet">; @keyword keyword_name attributes comment</pre>
	    
	    Attributes further describe keyword and detailed in
	    the section below. The comment may be an text and is
	    copied into the IDLdoc output.
	  </td>
	</tr>
	<tr>
	  <td>obsolete</td>
	  <td>
	    Presence of this tag marks the routine as obsolete.
	  </td>
	</tr>
	<tr>
	  <td>param</td>
	  <td>
	    This tag documents a single keyword parameter to the
	    routine. This syntax is 
	    
	    <pre class="snippet">; @param keyword_name attributes comment</pre> 
	    
	    Attributes further describe keyword and detailed in
	    the section below. The comment may be an text and is
	    copied into the IDLdoc output.
	  </td>
	</tr>
	<tr>
	  <td>pre</td>
	  <td>
	    Text following this tag will be copied to a pre
	    attribute of the routine; it is intended to give
	    conditions the routine assumes to be true before it
	    runs.
	  </td>
	</tr>
	<tr>
	  <td>post</td>
	  <td>
	    Text following this tag will be copied to a post
	    attribute of the routine; it is intended to give
	    conditions the routine assumes to be true after it
	    runs.
	  </td>
	</tr>
	<tr>
	  <td>private</td>
	  <td>
	    Presence of this tag will hide this routine in IDLdoc
	    output if IDLdoc is run in "user" mode.
	  </td>
	</tr>
	<tr>
	  <td>requires</td>
	  <td>
	    Text following this tag is copied into the "Requires"
	    attribute of the routine; it is intended to provide
	    the version of IDL required to run the routine. For
	    example,
	    
	    <pre class="snippet">; @requires IDL 6.2</pre>
	    
	    will simply cause "IDL 6.2" to appear in the
	    "Requires" attribute.
	  </td>
	</tr>
	<tr>
	  <td>restrictions</td>
	  <td>
	    Text following this tag is copied into the
	    "Restrictions" attribute of the routine; it is
	    intended to provide any restrictions on the use of the
	    routine.
	  </td>
	</tr>
	<tr>
	  <td>returns</td>
	  <td>
	    Text following this tag is copied into the "Returns"
	    attribute of the routine; it is intended to provide
	    information about return value of a function.
	  </td>
	</tr>
	<tr>
	  <td>todo</td>
	  <td>
	    This tag places an item in a library-wide list of todo
	    items. The text following the tag is copied into this list
	    along with the routine it appears in it.
	  </td>
	</tr>
	<tr>
	  <td>uses</td>
	  <td>
	    Text following this tag is placed in a uses attribute of
	    the routine; it is intended to list routines that this
	    routine calls.
	  </td>
	</tr>
	<tr>
	  <td>version</td>
	  <td>
	    Text following this tag is placed in a version attribute
	    of the routine; it is intended to give a version
	    name/number of the routine.
	  </td>
	</tr>
      </table>
      
      <p>For each positional parameters or keyword tag additional
      attributes may be added in curly braces. For example,</p>
	
      <pre class="snippet">; @param x {in}{required}{type=lonarr} x-axis data</pre>
	
      <p>The attributes are described below.</p>
      
      <table class="basic" cellspacing="0">
	<tr>
	  <th>Attribute</th>
	  <th>Description</th>
	</tr>
	<tr>
	  <td>default</td>
	  <td>
	    This atrribute defines the default value of the
	    parameter. Any string may be entered and is echoed in the
	    IDLdoc output.
	  </td>
	</tr>
	<tr>
	  <td>hidden</td>
	  <td>
	    This attribute hides this parameter in IDLdoc output.
	  </td>
	</tr>
	<tr>
	  <td>in</td>
	  <td>
	    This attribute marks the parameter as an input to the
	    routine.
	  </td>
	</tr>
	<tr>
	  <td>optional</td>
	  <td>
	    This attribute marks the parameter as optional; the
	    routine does not always need this parameter, although
	    there might be cases where the parameter is required
	    (depending on the presence and value of other parameters).
	  </td>
	</tr>
	<tr>
	  <td>out</td>
	  <td>
	    This attribute marks the parameter as an output to the
	    routine. This routine expects a named variable to be
	    passed to this parameter (if passed at all).
	  </td>
	</tr>
	<tr>
	  <td>private</td>
	  <td>
	    This attribute hides this parameter in IDLdoc output when
	    IDLdoc is run in "user" mode and marking it as "private"
	    when run in "developer" mode.
	  </td>
	</tr>
	<tr>
	  <td>required</td>
	  <td>
	    This attribute marks the parameter as required.
	  </td>
	</tr>
	<tr>
	  <td>type</td>
	  <td>
	    This atrribute defines the data type of the
	    parameter. Any string may be entered and is echoed in
	    the IDLdoc output. The special type "boolean" will cause
	    the calling syntax in IDLdoc output to use the IDL
	    online help syntax of prepending a "/" to the parameter
	    name.
	  </td>
	</tr>
      </table>
      
      <h2>File level comments</h2>
      
      <p>Some tags may appear in the comments for any routine in a
      file because they document attributes of the file. These tags
      are described below.</p>
      
      <table class="basic" cellspacing="0">
	<tr>
	  <th>Tag</th>
	  <th>Description</th>
	</tr>
	<tr>
	  <td>file_comments</td>
	  <td>
	    Text following the tag is copied to the top of the file
	    in the IDLdoc output i.e. it is a comment on the file
	    and not the routine it appears in. If there are multiple
	    file_comments tags in the file, the comments will be
	    concatenated in the order they are present in the file.
	  </td>
	</tr>
	<tr>
	  <td>hidden_file</td>
	  <td>
	    Presence of this tag indicates this entire file should
	    be hidden in IDLdoc output.
	  </td>
	</tr>
	<tr>
	  <td>private_file</td>
	  <td>
	    Presence of this tag indicates this entire file should
	    be hidden in IDLdoc output if IDLdoc is run in "user"
	    mode, but shown when run in "developer" mode (the
	    default).
	  </td>
	</tr>
      </table>
    
      <h2>Examples</h2>
      
      For example, here's a sample class definition routine:
      
      <pre class="snippet">;+
; Define the instance variables of the array_list.
;
; @file_comments An array_list is an object representing a variable 
;                length list of scalar elements of any single type. 
;                Array_lists support adding elements at the end of 
;                the vector only, but any element may be removed from 
;                the array_list. An iterator is provided for 
;                efficient and easy looping throught the elements of 
;                the array_list.
;
; @field data pointer to an array
; @field cur_size the current size of the data in the array
; @field max_size the maximum size of the data in the current array
; @field type type code (as in SIZE function) for the elements in the 
;        array_list
; @field sample_struct pointer to a structure if the type is 
;        "structure"
; @field iterators IDL_Container for the iterators of this array_list
;
; @requires IDL 6.0
;
; @author Michael D. Galloy
; @history Created September 26, 2003
; @copyright RSI, 2003
;-
pro array_list__define
    compile_opt idl2

    define = { array_list, $
        data:ptr_new(), $
        cur_size:0L, $
        max_size:0L, $
        type:0L, $
        sample_struct:ptr_new(), $
        iterators:obj_new() $
        }
end</pre>	

      Another example routine, this time a simple function with a positional parameter and keyword:

      <pre class="snippet">;+
; Returns [b, a] for a linear function y = a * x + b that sends
; inRange[0] -> range[0] and inRange[1] -> range[1].
;
; @returns dblarr(2)
; @param inRange {in}{required}{type=2 element numeric array} input 
;        range
; @keyword range {in}{optional}{type=dblarr(2)}{default=[0.D, 1.D]}
;          output range
; @categories math, object graphics
;-
function linear_function, inRange, range=outRange
    compile_opt idl2

    i_outRange = n_elements(outRange) eq 0 $
        ? [0.D, 1.D] $
        : double(outRange)

    scale = [i_outRange[0] * inRange[1] - i_outRange[1] * inRange[0], $
        i_outRange[1] - i_outRange[0]] / (inRange[1] - inRange[0])
    return, scale
end</pre>

      One more example, this time a function method with an output keyword.

      <pre class="snippet">;+
; Finds the value associated with the given key.
;
; @returns the value of the associated key or -1L if not found
; @param key {in}{type=key type} key to look up
; @keyword found {out}{optional}{type=boolean} true if value found for 
;          given key
;-
function hash_table::get, key, found=found</pre>

      <h2>Directory overviews</h2>

      <p>The "dir-overview" file in each directory of the library is
      copied into the directory overview file. Much of the content of
      the overview file is obtained from the PRO code files in the
      directory, but this allows header content as an overview of the
      all the files in the directory to be inserted at the top of the
      directory overview file.</p>


      <h2>Library overview</h2>

      <p>The library overview file is a single file which is inserted
      into the opening page of the IDLdoc output. This file is copied
      verbatim into the IDLdoc output except for the following tag
      which allows for comments on the contents of the directories
      found in the library.</p>

      <table class="basic" cellspacing="0">
	<tr>
	  <th>Tag</th>
	  <th>Description</th>
	</tr>
	<tr>
	  <td>dir</td>
	  <td>
	    The text following this tag is the relative path
	    (web-style, always with a /) to a directory in the
	    library and a comment which is copied into a table in
	    the opening page of the IDLdoc output.
	    
	    <pre class="snippet">; @dir algorithms/math mathematical routines</pre>
	  </td>
	</tr>
      </table>
    
      <h2>Syntax of IDLdoc routine</h2>
      
      <p>Below is the IDLdoc generated documentation for the IDLdoc main routine.</p>

      [% INCLUDE idldoc_syntax_filename %]

      [% IF footer NE '' %]<div id="footer">[% INCLUDE footer %]</div>[% END %]

      [% INCLUDE_TEMPLATE tagline_filename %]
      
    </div>
    
  </body>
</html>